{% extends 'layout.html' %}
{% block content %}
<wired-card class="entire_single" elevation="5" >
    <h3 class="alone">싱글 게임</h3>
    <div class="hint">
        <wired-card class="first_line container" elevation="5"><span></span></wired-card>
        <wired-card class="first_line container" elevation="5"><span></span></wired-card>
    </div>

    <div class="hint">
        <wired-card class="first_line container" elevation="5"><span></span></wired-card>
        <wired-card class="first_line container" elevation="5"><span></span></wired-card>
    </div>

    <div class="who">
        <wired-card class="second_line" elevation="5"><span>누구일까요?</span></wired-card>
        <wired-button elevation="3">확인</wired-button>
        <wired-input type="text" name="title" placeholder="챔피언 입력"> 
    </div>
</wired-card>
{% endblock %}
{% block script %}
<script>
	const socket = io.connect('http://localhost:3000/single', {
		path: '/socket.io',
	});

	// 문제 가져옴
	socket.emit('make');
	socket.on('get', function(data) { 
		const hintcard = document.querySelectorAll('.hint wired-card span');
		for(let i=0; i< 4;i++){
			hintcard[i].innerHTML = data[i].content;
		}
  	});

	// 확인 버튼
	function addConfirmEvent(e) {
		e.preventDefault();
		const insertedAnswer = document.querySelector('wired-input').value;
		console.log('확인버튼 누름');
		socket.emit('correct', insertedAnswer);
		socket.on('correct', function(data) {
			if(data === 'corrected'){
				socket.emit('make');
			}
			else {
				socket.emit('out');
			}
		})
	}
	const btn = document.querySelector('wired-button');
	btn.addEventListener('click', addConfirmEvent);	
	
	
</script>
{% endblock %}