{% extends 'layout.html' %}

{% block content %}
<h1>{{ userName }}</h1>
<wired-card class="entire" elevation="5" >
	<h3>게임방 목록</h3>
	* 최대 4명 입장 가능합니다~<br>
  <wired-link href="/single">싱글 모드 하기</wired-link>
  <wired-link href="/room">게임방 생성</wired-link><br><br>
  <table>
    <thead>
    <tr>
      <th>방 제목</th>
      <th>종류</th>
      <th>방장</th>
    </tr>
    </thead>
    <tbody>
	<tr data-id="1">
		<td>test-공개방</td>
		<td>'공개방'</td>
		<td style="color: #234567">#234567</td>
		<td>
			<wired-button class="join-btn" elevation="2">입장</wired-button>
		</td>
	</tr>
	<tr data-id="1">
		<td>test-비밀방</td>
		<td>'비밀방'</td>
		<td style="color: #765432">#765432</td>
		<td>
			<wired-button class="join-btn" elevation="2">입장</wired-button>
		</td>
	</tr>
    </tbody>
  </table>
  <div class="error-message">{{error}}</div>
  
</wired-card>
<script src="/socket.io/socket.io.js"></script>
<script>
	const socket = io.connect('http://localhost:3000/room', { // 네임스페이스
		path: '/socket.io',
	});
	
  	const button = document.querySelectorAll(".join-btn");
	  
	function addBtnEvent(e) { // 방 입장 클릭 시
		window.alert(`방 입장합니다`);
  	}

	document.querySelectorAll('.join-btn').forEach(function (btn) {
    	btn.addEventListener('click', addBtnEvent);
  	});
</script>
{% endblock %}
{% block script %}
<script>
  window.onload = () => {
    if (new URL(location.href).searchParams.get('error')) {
      alert(new URL(location.href).searchParams.get('error'));
    }
  };
</script>
{% endblock %}